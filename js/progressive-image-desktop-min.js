window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener("load",function(){var e,t,n=document.getElementsByClassName("progressive replace");(window.addEventListener("scroll",i,!1),window.addEventListener("resize",i,!1),MutationObserver)&&new MutationObserver(function(){n.length!==e&&r()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0,characterData:!0});document.addEventListener("load",a);var a=setTimeout(r,1e3);function i(){t=t||setTimeout(function(){t=null,r()},300)}function r(){n.length&&requestAnimationFrame(function(){for(var t,a,i,r=window.pageXOffset,o=r+window.innerWidth,d=0;d<n.length;)i=(a=r+(t=n[d].getBoundingClientRect()).left)+t.width,o>a&&r<i?(s(n[d]),n[d].classList.remove("replace")):d++;e=n.length})}function s(e){var t=e&&(e.getAttribute("data-href")||e.href);if(t){var n=new Image;e.dataset&&(n.srcset=e.dataset.srcset||"",n.sizes=e.dataset.sizes||""),n.src=t,n.width<770?n.className="reveal small":n.className="reveal",n.complete?a():n.onload=a}function a(){requestAnimationFrame(function(){t===e.href&&(e.style.cursor="default",e.addEventListener("click",function(e){e.preventDefault()},!1));var a=e.querySelector&&e.querySelector("img.preview");e.insertBefore(n,a&&a.nextSibling).addEventListener("animationend",function(){a&&(n.alt=a.alt||"",e.removeChild(a)),n.classList.remove("reveal")})})}}},!1);